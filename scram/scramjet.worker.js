{n}`}return n}case"style":return(0,o.U5)(await e.text(),t);case"sharedworker":case"worker":return(0,o.$O)(new Uint8Array(await e.arrayBuffer()),r,e.finalURL,t);default:return e.body}}class u extends Event{responseBody;responseHeaders;status;statusText;destination;url;rawResponse;client;constructor(e,t,n,r,o,i,s,a){super("handleResponse"),this.responseBody=e,this.responseHeaders=t,this.status=n,this.statusText=r,this.destination=o,this.url=i,this.rawResponse=s,this.client=a}}class f extends Event{url;requestHeaders;body;method;destination;client;constructor(e,t,n,r,o,i){super("request"),this.url=e,this.requestHeaders=t,this.body=n,this.method=r,this.destination=o,this.client=i}response}},3093:function(e,t,n){n.d(t,{t:()=>r});function r(){return"10000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}},7418:function(e,t,n){let r;n.d(t,{DF:()=>_,Fp:()=>y,rb:()=>R});var o=n(3093);function i(e){let t=r.__externref_table_alloc();return r.__wbindgen_export_2.set(t,e),t}function s(e,t){try{return e.apply(this,t)}catch(t){let e=i(t);r.__wbindgen_exn_store(e)}}let a="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&a.decode();let c=null;function l(){return(null===c||c.buffer!==r.memory.buffer)&&(c=new Uint8Array(r.memory.buffer)),c}function d(e,t){return e>>>=0,a.decode(l().slice(e,e+t))}let u=0,f="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},g=function(e,t){let n=f.encode(e);return t.set(n),{read:e.length,written:n.length}};function h(e,t,n){if(void 0===n){let n=f.encode(e),r=t(n.length,1)>>>0;return l().subarray(r,r+n.length).set(n),u=n.length,r}let r=e.length,o=t(r,1)>>>0,i=l(),s=0;for(;s<r;s++){let t=e.charCodeAt(s);if(t>127)break;i[o+s]=t}if(s!==r){0!==s&&(e=e.slice(s)),o=n(o,r,r=s+3*e.length,1)>>>0;let t=g(e,l().subarray(o+s,o+r));s+=t.written,o=n(o,r,s,1)>>>0}return u=s,o}let b=null;function w(){return(null===b||b.buffer!==r.memory.buffer)&&(b=new DataView(r.memory.buffer)),b}function p(e){return null==e}function m(e){let t=r.__wbindgen_export_2.get(e);return r.__externref_table_dealloc(e),t}function _(e,t,n,o,i){let s=h(e,r.__wbindgen_malloc,r.__wbindgen_realloc),a=u,c=h(t,r.__wbindgen_malloc,r.__wbindgen_realloc),l=u,d=h(n,r.__wbindgen_malloc,r.__wbindgen_realloc),f=u,g=r.rewrite_js(s,a,c,l,d,f,o,i);if(g[2])throw m(g[1]);return m(g[0])}function y(e,t,n,o,i){let s=function(e,t){let n=t(+e.length,1)>>>0;return l().set(e,n/1),u=e.length,n}(e,r.__wbindgen_malloc),a=u,c=h(t,r.__wbindgen_malloc,r.__wbindgen_realloc),d=u,f=h(n,r.__wbindgen_malloc,r.__wbindgen_realloc),g=u,b=r.rewrite_js_from_arraybuffer(s,a,c,d,f,g,o,i);if(b[2])throw m(b[1]);return m(b[0])}async function v(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"!=e.headers.get("Content-Type"))console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{let n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function x(){let e={};return e.wbg={},e.wbg.__wbg_buffer_609cc3eee51ed158=function(e){return e.buffer},e.wbg.__wbg_call_672a4d21634d4a24=function(){return s(function(e,t){return e.call(t)},arguments)},e.wbg.__wbg_call_7cccdd69e0791ae2=function(){return s(function(e,t,n){return e.call(t,n)},arguments)},e.wbg.__wbg_call_833bed5770ea2041=function(){return s(function(e,t,n,r){return e.call(t,n,r)},arguments)},e.wbg.__wbg_get_67b2ba62fc30de12=function(){return s(function(e,t){return Reflect.get(e,t)},arguments)},e.wbg.__wbg_new_405e22f390576ce2=function(){return{}},e.wbg.__wbg_new_78feb108b6472713=function(){return[]},e.wbg.__wbg_new_9ffbe0a71eff35e3=function(){return s(function(e,t){return new URL(d(e,t))},arguments)},e.wbg.__wbg_new_a12002a7f91c75be=function(e){return new Uint8Array(e)},e.wbg.__wbg_newnoargs_105ed471475aaf50=function(e,t){return Function(d(e,t))},e.wbg.__wbg_newwithbase_161c299e7a34e2eb=function(){return s(function(e,t,n,r){return new URL(d(e,t),d(n,r))},arguments)},e.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(e,t,n){return new Uint8Array(e,t>>>0,n>>>0)},e.wbg.__wbg_now_d18023d54d4e5500=function(e){return e.now()},e.wbg.__wbg_scramtag_3a255d78b157986d=function(e){let t=h((0,o.t)(),r.__wbindgen_malloc,r.__wbindgen_realloc),n=u;w().setInt32(e+4,n,!0),w().setInt32(e+0,t,!0)},e.wbg.__wbg_set_bb8cecf6a62b9f46=function(){return s(function(e,t,n){return Reflect.set(e,t,n)},arguments)},e.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){let e="undefined"==typeof global?null:global;return p(e)?0:i(e)},e.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){let e="undefined"==typeof globalThis?null:globalThis;return p(e)?0:i(e)},e.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){let e="undefined"==typeof self?null:self;return p(e)?0:i(e)},e.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){let e="undefined"==typeof window?null:window;return p(e)?0:i(e)},e.wbg.__wbg_toString_5285597960676b7b=function(e){return e.toString()},e.wbg.__wbg_toString_c813bbd34d063839=function(e){return e.toString()},e.wbg.__wbindgen_boolean_get=function(e){return"boolean"==typeof e?+!!e:2},e.wbg.__wbindgen_error_new=function(e,t){return Error(d(e,t))},e.wbg.__wbindgen_init_externref_table=function(){let e=r.__wbindgen_export_2,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},e.wbg.__wbindgen_is_function=function(e){return"function"==typeof e},e.wbg.__wbindgen_is_undefined=function(e){return void 0===e},e.wbg.__wbindgen_memory=function(){return r.memory},e.wbg.__wbindgen_number_new=function(e){return e},e.wbg.__wbindgen_string_get=function(e,t){let n="string"==typeof t?t:void 0;var o=p(n)?0:h(n,r.__wbindgen_malloc,r.__wbindgen_realloc),i=u;w().setInt32(e+4,i,!0),w().setInt32(e+0,o,!0)},e.wbg.__wbindgen_string_new=function(e,t){return d(e,t)},e.wbg.__wbindgen_throw=function(e,t){throw Error(d(e,t))},e}function S(e,t){e.wbg.memory=t||new WebAssembly.Memory({initial:18,maximum:16384,shared:!0})}function k(e,t,n){if(r=e.exports,j.__wbindgen_wasm_module=t,b=null,c=null,void 0!==n&&("number"!=typeof n||0===n||n%65536!=0))throw"invalid stack size";return r.__wbindgen_start(n),r}function R(e,t){let n;if(void 0!==r)return r;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?{module:e,memory:t,thread_stack_size:n}=e:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));let o=x();return S(o,t),e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e)),k(new WebAssembly.Instance(e,o),e,n)}async function j(e,t){let n;if(void 0!==r)return r;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e,memory:t,thread_stack_size:n}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),void 0===e&&(e=new URL("wasm_bg.wasm",""));let o=x();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e)),S(o,t);let{instance:i,module:s}=await v(await e,o);return k(i,s,n)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(9022),t=n(8931),r=n(8810),o=n(4079);class i extends EventTarget{client;config;syncPool={};synctoken=0;cookieStore=new r.h3.shared.CookieStore;serviceWorkers=[];constructor(){super(),this.client=new r.h3.shared.util.BareClient;let t=indexedDB.open("$scramjet",1);t.onsuccess=()=>{let e=t.result.transaction("cookies","readonly").objectStore("cookies").get("cookies");e.onsuccess=()=>{e.result&&this.cookieStore.load(e.result)}},addEventListener("message",async({data:n})=>{if("scramjet$type"in n){if("scramjet$token"in n){let e=this.syncPool[n.scramjet$token];delete this.syncPool[n.scramjet$token],e(n);return}if("registerServiceWorker"===n.scramjet$type)return void this.serviceWorkers.push(new e.Y(n.port,n.origin));"cookie"===n.scramjet$type&&(this.cookieStore.setCookies([n.cookie],new URL(n.url)),t.result.transaction("cookies","readwrite").objectStore("cookies").put(JSON.parse(this.cookieStore.dump()),"cookies")),"loadConfig"===n.scramjet$type&&(this.config=n.config)}})}async dispatch(e,t){let n,r=this.synctoken++,o=new Promise(e=>n=e);return this.syncPool[r]=n,t.scramjet$token=r,e.postMessage(t),await o}async loadConfig(){if(this.config)return;let e=indexedDB.open("$scramjet",1);return new Promise((t,n)=>{e.onsuccess=async()=>{let i=e.result.transaction("config","readonly").objectStore("config").get("config");i.onsuccess=async()=>{this.config=i.result,r.h3.config=i.result,(0,r.t8)(),await (0,o.o)(),t()},i.onerror=()=>n(i.error)},e.onerror=()=>n(e.error)})}route({request:e}){return!!e.url.startsWith(location.origin+this.config.prefix)||!!e.url.startsWith(location.origin+this.config.files.wasm)}async fetch({request:e,clientId:n}){this.config||await this.loadConfig();let r=await self.clients.get(n);return t.pd.call(this,e,r)}}self.ScramjetServiceWorker=i})()})();
//# sourceMappingURL=https://cdn.jsdelivr.net/gh/gustambolopez/scram/scramjet.worker.js.map